# 

- 来源：[Acwing](https://www.acwing.com/video/551/)

## 题目描述
著名旅游城市 B 市为了鼓励大家采用公共交通方式出行，推出了一种地铁换乘公交车的优惠方案：

在搭乘一次地铁后可以获得一张优惠票，有效期为 45 分钟，在有效期内可以消耗这张优惠票，免费搭乘一次票价不超过地铁票价的公交车。在有效期内指开始乘公交车的时间与开始乘地铁的时间之差小于等于 45 分钟，即：tbus−tsubway≤45
搭乘地铁获得的优惠票可以累积，即可以连续搭乘若干次地铁后再连续使用优惠票搭乘公交车，但每次搭乘公交车只能使用一张优惠券。
**搭乘公交车时，如果可以使用优惠票一定会使用优惠票；如果有多张优惠票满足条件，则优先消耗获得最早的优惠票。
现在你得到了小轩最近的公共交通出行记录，你能帮他算算他的花费吗?**
>核心1:策略 每时每刻只有一个选择，模拟题

输入格式
第一行包含一个正整数 n，代表乘车记录的数量。

接下来的 n 行，每行包含 3 个整数，相邻两数之间以一个空格分隔。第 i 行的第 1 个整数代表第 i 条记录乘坐的交通工具，0 代表地铁，1 代表公交车；第 2 个整数代表第 i 条记录乘车的票价 pricei ；第三个整数代表第 i 条记录开始乘车的时间 ti（距 0 时刻的分钟数）。

我们保证出行记录是按照开始乘车的时间顺序给出的，且 **不会有两次乘车记录出现在同一分钟。**
>核心2:每一分钟只有一条记录


输出格式
有一行，包含一个正整数，代表小轩出行的总花费。

数据范围
对于 30% 的数据，n≤1000，ti≤106。

另有 15% 的数据，ti≤107，pricei 都相等。

另有 15% 的数据，ti≤109，pricei 都相等。

对于 100% 的数据，n≤105，ti≤109，1≤pricei≤1000。

输入样例1：
6
0 10 3
1 5 46
0 12 50
1 3 96
0 5 110
1 6 135
输出样例1：
36
输入样例2：
6
0 5 1
0 20 16
0 7 23
1 18 31
1 4 38
1 7 68
输出样例2：
32
样例解释
样例#1：
第一条记录，在第 3 分钟花费 10 元乘坐地铁。

第二条记录，在第 46 分钟乘坐公交车，可以使用第一条记录中乘坐地铁获得的优惠票，因此没有花费。

第三条记录，在第 50 分种花费 12 元乘坐地铁。

第四条记录，在第 96 分钟乘坐公交车，由于距离第三条记录中乘坐地铁已超过 45 分钟，所以优惠票已失效，花费 3 元乘坐公交车。

第五条记录，在第 110 分钟花费 5 元乘坐地铁。

第六条记录，在第 135 分钟乘坐公交车，由于此时手中只有第五条记录中乘坐地铁获得的优惠票有效，而本次公交车的票价为 6 元，高于第五条记录中地铁的票价 5 元，所以不能使用优惠票，花费 6 元乘坐公交车。

总共花费 36 元。

样例#2：
第一条记录，在第 1 分钟花费 5 元乘坐地铁。

第二条记录，在第 16 分钟花费 20 元乘坐地铁。

第三条记录，在第 23 分钟花费 7 元乘坐地铁。

第四条记录，在第 31 分钟乘坐公交车，此时只有第二条记录中乘坐的地铁票价高于本次公交车票价，所以使用第二条记录中乘坐地铁获得的优惠票。

第五条记录，在第 38 分钟乘坐公交车，此时第一条和第三条记录中乘坐地铁获得的优惠票都可以使用，使用获得最早的优惠票，即第一条记录中乘坐地铁获得的优惠票。

第六条记录，在第 68 分钟乘坐公交车，使用第三条记录中乘坐地铁获得的优惠票。

总共花费 32 元。

难度：简单
时/空限制：1s / 64MB
总通过数：460
总尝试数：1320
来源：2019 CCF CSP-J2, NOIP
算法标签




## 做题思路
1. 读题
2. 抽象模型
3. 怎么做
4. 写代码
 

## 分解步骤
2. 抽象模型
3. 怎么做

滑动窗口
1. 如果当前是地铁票，先买票，将该优惠券存入滑动窗口
2. 如果当前是公交车，
	- 可以用优惠券，从滑动窗口中找出第一个没有被用过且面值大于等于当前票价的优惠券。如果找到，那么就把优惠券删掉。用布尔数组标记 space[i]==true
	- 如果没有找到优惠券，买票！

3.滑动窗口——队列

时间复杂度，公交车45条记录，每次扫描一次45n，n的范围是10的5次方，整个复杂度小于500w。






## 代码解析

```C++
#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>

using namespace std;

const int N = 100010;

int n;
struct Ticket
{
	int time,price;
	bool used;
}tk[N];

int main()
{
	scanf("%d",&n)
	int res=0;
	for (int i =0,l=0,r=0;i<n;i++)
	{
		int type,price,time;
		scanf("%d%d%d",&type,&price,&time)
	}
}


```






































